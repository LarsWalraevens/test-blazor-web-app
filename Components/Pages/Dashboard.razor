@page "/dashboard"


@inherits LayoutComponentBase
@using CustomDashboard.Components
@using Microsoft.AspNetCore.Components
@using System.Collections.ObjectModel
@inject IJSRuntime JSRuntime
@rendermode InteractiveServer

<PageTitle>Custom dashboard</PageTitle>

<h1 class="mb-4">
    <a href="/">
        <span class="bi bi-arrow-left mr-2"></span>
    </a>
    Custom dashboard
    <span class="btn btn-primary" @onclick="ToggleEditing">
        <i class="bi bi-pencil mr-2" />
        @(!Instance.IsEditing ? "Edit" : "Stop editing")
    </span>
</h1>
@if (Instance != null && Instance.Items != null)
{
    <CustomDashboardComponent Instance="@Instance" />
}

@code {

    private CustomDashboardInstance Instance { get; set; }

    private void ToggleEditing()
    {
        Instance.IsEditing = !Instance.IsEditing;
        StateHasChanged();
    }



    protected override void OnInitialized()
    {
        Instance = new CustomDashboardInstance(
        (maxX: 9, maxY: 6)
        )
            {
                Items = new ObservableCollection<CustomDashboardItem>([
            new CustomDashboardItem { Id = Guid.NewGuid(), Name = "My Side Widget 1", Position = (0, 0), Size = (1, 2), IsAvailable
= false },
new CustomDashboardItem { Id = Guid.NewGuid(), Name = "Small Widget 2", Position = (2, 0), Size = (1, 1), IsAvailable =
false },
new CustomDashboardItem { Id = Guid.NewGuid(), Name = "Small Widget 1", Position = (1, 0), Size = (1, 1), IsAvailable =
false },
new CustomDashboardItem { Id = Guid.NewGuid(), Name = "Small Widget 3", Position = (3, 0), Size = (1, 1), IsAvailable =
false },
new CustomDashboardItem { Id = Guid.NewGuid(), Position = (4, 0), Size = (1, 1), IsAvailable = true },
new CustomDashboardItem { Id = Guid.NewGuid(), Name = "Big widget all the way right", Position = (5, 0), Size = (3, 3),
IsAvailable = false },
new CustomDashboardItem { Id = Guid.NewGuid(), Position = (8, 0), Size = (1, 1), IsAvailable = true },
new CustomDashboardItem { Id = Guid.NewGuid(), Position = (9, 0), Size = (1, 1), IsAvailable = true },
new CustomDashboardItem { Id = Guid.NewGuid(), Name = "Very Big Widget", Position = (1, 1), Size = (4, 4), IsAvailable =
false },
new CustomDashboardItem { Id = Guid.NewGuid(), Position = (8, 1), Size = (1, 1), IsAvailable = true },
new CustomDashboardItem { Id = Guid.NewGuid(), Position = (9, 1), Size = (1, 1), IsAvailable = true },
new CustomDashboardItem { Id = Guid.NewGuid(), Name = "My Side Widget 2", Position = (0, 2), Size = (1, 2), IsAvailable
= false },
new CustomDashboardItem { Id = Guid.NewGuid(), Position = (8, 2), Size = (1, 1), IsAvailable = true },
new CustomDashboardItem { Id = Guid.NewGuid(), Position = (9, 2), Size = (1, 1), IsAvailable = true },
new CustomDashboardItem { Id = Guid.NewGuid(), Position = (5, 3), Size = (1, 1), IsAvailable = true },
new CustomDashboardItem { Id = Guid.NewGuid(), Position = (6, 3), Size = (1, 1), IsAvailable = true },
new CustomDashboardItem { Id = Guid.NewGuid(), Position = (7, 3), Size = (1, 1), IsAvailable = true },
new CustomDashboardItem { Id = Guid.NewGuid(), Position = (8, 3), Size = (1, 1), IsAvailable = true },
new CustomDashboardItem { Id = Guid.NewGuid(), Position = (9, 3), Size = (1, 1), IsAvailable = true },
new CustomDashboardItem { Id = Guid.NewGuid(), Position = (0, 4), Size = (1, 1), IsAvailable = true },
new CustomDashboardItem { Id = Guid.NewGuid(), Position = (5, 4), Size = (1, 1), IsAvailable = true },
new CustomDashboardItem { Id = Guid.NewGuid(), Position = (6, 4), Size = (1, 1), IsAvailable = true },
new CustomDashboardItem { Id = Guid.NewGuid(), Position = (7, 4), Size = (1, 1), IsAvailable = true },
new CustomDashboardItem { Id = Guid.NewGuid(), Position = (8, 4), Size = (1, 1), IsAvailable = true },
new CustomDashboardItem { Id = Guid.NewGuid(), Position = (9, 4), Size = (1, 1), IsAvailable = true },
new CustomDashboardItem { Id = Guid.NewGuid(), Position = (0, 5), Size = (1, 1), IsAvailable = true },
new CustomDashboardItem { Id = Guid.NewGuid(), Position = (1, 5), Size = (1, 1), IsAvailable = true },
new CustomDashboardItem { Id = Guid.NewGuid(), Position = (2, 5), Size = (1, 1), IsAvailable = true },
new CustomDashboardItem { Id = Guid.NewGuid(), Position = (3, 5), Size = (1, 1), IsAvailable = true },
new CustomDashboardItem { Id = Guid.NewGuid(), Position = (4, 5), Size = (1, 1), IsAvailable = true },
new CustomDashboardItem { Id = Guid.NewGuid(), Position = (5, 5), Size = (1, 1), IsAvailable = true },
new CustomDashboardItem { Id = Guid.NewGuid(), Position = (6, 5), Size = (1, 1), IsAvailable = true },
new CustomDashboardItem { Id = Guid.NewGuid(), Position = (7, 5), Size = (1, 1), IsAvailable = true },
new CustomDashboardItem { Id = Guid.NewGuid(), Position = (8, 5), Size = (1, 1), IsAvailable = true },
new CustomDashboardItem { Id = Guid.NewGuid(), Position = (9, 5), Size = (1, 1), IsAvailable = true },
new CustomDashboardItem { Id = Guid.NewGuid(), Position = (0, 6), Size = (1, 1), IsAvailable = true },
new CustomDashboardItem { Id = Guid.NewGuid(), Position = (1, 6), Size = (1, 1), IsAvailable = true },
new CustomDashboardItem { Id = Guid.NewGuid(), Position = (2, 6), Size = (1, 1), IsAvailable = true },
new CustomDashboardItem { Id = Guid.NewGuid(), Position = (3, 6), Size = (1, 1), IsAvailable = true },
new CustomDashboardItem { Id = Guid.NewGuid(), Position = (4, 6), Size = (1, 1), IsAvailable = true },
new CustomDashboardItem { Id = Guid.NewGuid(), Position = (5, 6), Size = (1, 1), IsAvailable = true },
new CustomDashboardItem { Id = Guid.NewGuid(), Position = (6, 6), Size = (1, 1), IsAvailable = true },
new CustomDashboardItem { Id = Guid.NewGuid(), Position = (7, 6), Size = (1, 1), IsAvailable = true },
new CustomDashboardItem { Id = Guid.NewGuid(), Position = (8, 6), Size = (1, 1), IsAvailable = true },
new CustomDashboardItem { Id = Guid.NewGuid(), Position = (9, 6), Size = (1, 1), IsAvailable = true }
            ])
            };
        @* Instance = new CustomDashboardInstance((maxX: 10, maxY: 10)); *@

        base.OnInitialized();
    }
}